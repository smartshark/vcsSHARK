<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. How to Extend &mdash; vcsSHARK 2.1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. API Documentation" href="api.html" />
    <link rel="prev" title="1. Introduction" href="intro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> vcsSHARK
            <img src="_static/SmartSHARK_read_the_docs_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. How to Extend</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parsers">2.1. Parsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datastores">2.2. Datastores</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">3. API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">vcsSHARK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">2. </span>How to Extend</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/extension.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-extend">
<h1><span class="section-number">2. </span>How to Extend<a class="headerlink" href="#how-to-extend" title="Permalink to this headline"></a></h1>
<p><strong>vcsSHARK</strong> has two different extension possibilities. First, you can add new parsers for new repository
types (e.g. SVN, CVS). Currently, only GIT repositories can  be parsed. Second, there is the possibility to add
new datastores (e.g. MySQL). Currently, only MongoDB is supported as a datastore backend.
This chapter will show what needs to be done to extend <strong>vcsSHARK</strong>.</p>
<section id="parsers">
<h2><span class="section-number">2.1. </span>Parsers<a class="headerlink" href="#parsers" title="Permalink to this headline"></a></h2>
<p>All parsers are stored in pyvcsshark/parser folder. There are conditions, which must be fulfilled by a parser so
that it is accepted by <strong>vcsSHARK</strong>:</p>
<ol class="arabic simple">
<li><p>The *.py file for this parser must be stored in the pyvcsshark/parser folder.</p></li>
<li><p>It must inherit from <a class="reference internal" href="api.html#pyvcsshark.parser.baseparser.BaseParser" title="pyvcsshark.parser.baseparser.BaseParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseParser</span></code></a> and implement the methods defined there.</p></li>
</ol>
<p>The process of chosing the parser is the following:</p>
<ul class="simple">
<li><p>Every parser gets instantiated</p></li>
<li><p>The detect method is executed</p></li>
<li><p>If a parser returns true for the detect method, this parser is used for the repository</p></li>
</ul>
<p>There are several important things to note:</p>
<ol class="arabic">
<li><p>If you want to use a logger for your implementation, get it via</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;parser&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p>2.      You must call the <a class="reference internal" href="api.html#pyvcsshark.datastores.basestore.BaseStore.add_commit" title="pyvcsshark.datastores.basestore.BaseStore.add_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_commit()</span></code></a> function of the datastore,
that is given to the parser as argument of the parse method, to add commits.</p>
<p>3.      You must use the models as they are defined in in the module <strong>pyvcsshark.dbmodels.models</strong>, as otherwise the
interfaces do not match</p>
<ol class="arabic simple" start="4">
<li><p>The execution logic is in the application class and explained here <a class="reference internal" href="api.html#pyvcsshark.Application" title="pyvcsshark.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a>.</p></li>
</ol>
</section>
<section id="datastores">
<h2><span class="section-number">2.2. </span>Datastores<a class="headerlink" href="#datastores" title="Permalink to this headline"></a></h2>
<p>All datastores are stored in the pyvcsshark/datastores folder. There are conditions, which must be fulfilled by a
datastore so that it is accepted by <strong>vcsSHARK</strong>:</p>
<ol class="arabic">
<li><p>The *.py file for this datastore must be stored in the pyvcsshark/datastore folder.</p></li>
<li><p>It must inherit from <a class="reference internal" href="api.html#pyvcsshark.datastores.basestore.BaseStore" title="pyvcsshark.datastores.basestore.BaseStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStore</span></code></a> and implement the methods defined there.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The store_identifier property must just return a string, which represents your datastore and is not used by another datastore</p>
</div>
</li>
</ol>
<p>The process of choosing the datastore is the following:</p>
<ul class="simple">
<li><p>Every datastore gets instantiated</p></li>
<li><p>The store_identifier property is compared to the db-driver that was chosen by the user</p></li>
<li><p>If they are equal, the correct datastore was found</p></li>
</ul>
<p>There are several important things to note:</p>
<ol class="arabic">
<li><p>If you want to use a logger for your implementation, get it via</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;datastore&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p>2.      The <a class="reference internal" href="api.html#pyvcsshark.datastores.basestore.BaseStore.add_commit" title="pyvcsshark.datastores.basestore.BaseStore.add_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_commit()</span></code></a> method gets a commit model
of class <code class="xref py py-class docutils literal notranslate"><span class="pre">CommitModel</span></code> as parameter. Think about this first!</p>
<ol class="arabic simple" start="3">
<li><p>The execution logic is in the application class and explained here <a class="reference internal" href="api.html#pyvcsshark.Application" title="pyvcsshark.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dont mind if your datastore do not need all the information of the <a class="reference internal" href="api.html#pyvcsshark.datastores.basestore.BaseStore.initialize" title="pyvcsshark.datastores.basestore.BaseStore.initialize"><code class="xref py py-func docutils literal notranslate"><span class="pre">initialize()</span></code></a> function.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="intro.html" class="btn btn-neutral float-left" title="1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="3. API Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Fabian Trautsch.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>